Create a new branch called f-sql

Sakila Database

Write a SQL statement for each of the following. 

1. Get 10 cities in descending alphabetical order.
SELECT city FROM city
		ORDER BY city DESC LIMIT 10;

2. Get all films with "airplane" in the title.
SELECT * 
	FROM FILM
	WHERE title LIKE '%airplane%';

3. Get the highest payment amount.
SELECT MAX(amount) as highest_payment_amount
	FROM payment;

4. Get the number of records in the customer table for store id #1.
SELECT COUNT(store_id) as number_of_records
	FROM customer
	WHERE store_id = 1;

5. Get all payment records for customer with email address "NANCY.THOMAS@sakilacustomer.org"
SELECT p.*
		FROM payment AS p
        JOIN customer AS c ON c.customer_id = p.customer_id
        WHERE c.email = 'NANCY.THOMAS@sakilacustomer.org';

6. Use a View to get the film info for actor Bob Fawcett.
SELECT * FROM film_list
		WHERE actors LIKE '%BOB FAWCETT%';

7. Use a Stored Procedure to get the 4 inventory ids for the film "Alien Center" at Store #2. 
SET @filmid = (SELECT f.film_id
	FROM film AS f
		WHERE f.title = 'Alien Center');
SET @filmCount = 0;
CALL film_in_stock(@filmid, 2, @filmCount);

8. Insert a new store. Ensure that you use TRANSACTION. (This one is possible but it's tough! Pay attention to constraints and the order that you are inserting data.)
START TRANSACTION;

UPDATE store SET store_id = 3, address_id = 3, last_update = current_timestamp() WHERE manager_staff_id = 2;
        
INSERT INTO staff
	VALUES(3,'smith','johnson',5,null, 'smith.johnson@sakilastaff.com', 3, 1, 'smith', MD5('123'), current_timestamp());

UPDATE store SET manager_staff_id = 3 WHERE store_id = 3;
    
INSERT INTO store(store_id, manager_staff_id, address_id, last_update)
		VALUES(2,2,2,'2006-02-15 04:57:12');

ROLLBACK;

9. Update the timestamp to the current date/time for the new store you entered in the previous question. 
UPDATE store SET last_update = CURRENT_TIMESTAMP WHERE store_id = 3;

10. Delete the new store. 
DELETE FROM store WHERE store_id = 3;


